#ifndef DRC_H
#define DRC_H

#include "Arduino.h"
class DRC {
	public:
	DRC(float fs, float T,float tauAtt,float tauRel, float R,float w, float mu);
	int16_t softKnee(float x);
	
	private:
	float log10f_approx(float X);
	float _T;
    float _alphAtt;
	float _alphRel;
	float _slope;
	float _yprev;
	float _w; 
	float _mu;
	float _w4;	 
	
};
static const float G[193] = {
	0.00001585f, 0.00001778f, 0.00001995f, 0.00002239f, 0.00002512f, 0.00002818f, 0.00003162f, 0.00003548f, 0.00003981f, 0.00004467f, 
	0.00005012f, 0.00005623f, 0.00006310f, 0.00007079f, 0.00007943f, 0.00008913f, 0.00010000f, 0.00011220f, 0.00012589f, 0.00014125f, 
	0.00015849f, 0.00017783f, 0.00019953f, 0.00022387f, 0.00025119f, 0.00028184f, 0.00031623f, 0.00035481f, 0.00039811f, 0.00044668f, 
	0.00050119f, 0.00056234f, 0.00063100f, 0.00070795f, 0.00079433f, 0.00089125f, 0.00100000f, 0.00112202f, 0.00125893f, 0.00141254f, 
	0.00158489f, 0.00177828f, 0.00199526f, 0.00223872f, 0.00251189f, 0.00281838f, 0.00316228f, 0.00354813f, 0.00398107f, 0.00446684f, 
	0.00501187f, 0.00562341f, 0.00630957f, 0.00707946f, 0.00794328f, 0.00891251f, 0.01000000f, 0.01122018f, 0.01258925f, 0.01412538f, 
	0.01584893f, 0.01778279f, 0.01995262f, 0.02238721f, 0.02511886f, 0.02818383f, 0.03162278f, 0.03548134f, 0.03981072f, 0.04466836f, 
	0.05011872f, 0.05623413f, 0.06309573f, 0.07079458f, 0.07943282f, 0.08912509f, 0.10000000f, 0.11220185f, 0.12589254f, 0.14125375f, 
	0.15848932f, 0.17782794f, 0.19952623f, 0.22387211f, 0.25118864f, 0.28183829f, 0.31622777f, 0.35481339f, 0.39810717f, 0.44668359f, 
	0.50118723f, 0.56234133f, 0.63095734f, 0.70794578f, 0.79432823f, 0.89125094f, 1.00000000f, 1.12201845f, 1.25892541f, 1.41253754f, 
	1.58489319f, 1.77827941f, 1.99526231f, 2.23872114f, 2.51188643f, 2.81838293f, 3.16227766f, 3.54813389f, 3.98107171f, 4.46683592f, 
	5.01187234f, 5.62341325f, 6.30957344f, 7.07945784f, 7.94328235f, 8.91250938f, 10.00000000f, 11.22018454f, 12.58925412f, 14.12537545f, 
	15.84893192f, 17.78279410f, 19.95262315f, 22.38721139f, 25.11886432f, 28.18382931f, 31.62277660f, 35.48133892f, 39.81071706f, 44.66835922f, 
	50.11872336f, 56.23413252f, 63.09573445f, 70.79457844f, 79.43282347f, 89.12509381f, 100.00000000f, 112.20184543f, 125.89254118f, 141.25375446f, 
	158.48931925f, 177.82794100f, 199.52623150f, 223.87211386f, 251.18864315f, 281.83829313f, 316.22776602f, 354.81338923f, 398.10717055f, 446.68359215f, 
	501.18723363f, 562.34132519f, 630.95734448f, 707.94578438f, 794.32823472f, 891.25093813f, 1000.00000000f, 1122.01845430f, 1258.92541179f, 1412.53754462f, 
	1584.89319246f, 1778.27941004f, 1995.26231504f, 2238.72113857f, 2511.88643151f, 2818.38293126f, 3162.27766017f, 3548.13389234f, 3981.07170553f, 4466.83592151f, 
	5011.87233627f, 5623.41325190f, 6309.57344480f, 7079.45784384f, 7943.28234724f, 8912.50938134f
};
#endif